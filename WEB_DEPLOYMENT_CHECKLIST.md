# ุฏููู ูุดุฑ ุงููููุน ุงูุฅููุชุฑููู - Web Deployment Checklist

## โ ุงูุชุญุฏูุซุงุช ุงูููุชููุฉ

### 1. ุฅุนุฏุงุฏุงุช ุงูุชูููู (Configuration)
- โ **config.js**: ุชู ุชุญุฏูุซู ูููุดู ุงูุชููุงุฆู ุนู ุงูุจูุฆุฉ
- โ **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุชู ุฅุถุงูุฉ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ููุทูุจุงุช
- โ **ูููุฉ ุงูุทูุจุงุช**: ุชู ุชุนููู ูููุฉ ุฒูููุฉ 30 ุซุงููุฉ

### 2. ูููุงุช ุชุณุฌูู ุงูุฏุฎูู
- โ **login.js**: ุชู ุชุญุฏูุซู ูุงุณุชุฎุฏุงู ุงููุธุงู ุงููุญุณู
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุชู ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุงุณุชุฌุงุจุงุช
- โ **ุงูุชุณุฌูู**: ุชู ุฅุถุงูุฉ ุชุณุฌูู ููุตู ููุชุดุฎูุต

### 3. ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
- โ **session-manager.js**: ุชู ุชุญุฏูุซู ููุชูุงูู ูุน ุจูุฆุฉ ุงูุฅูุชุงุฌ
- โ **ุงูุชุญูู ูู ุงูุฌูุณุฉ**: ุชู ุชุญุณูู ุขููุฉ ุงูุชุญูู ูู ุตุญุฉ ุงูุฌูุณุฉ
- โ **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุชู ุฅุถุงูุฉ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ

### 4. ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
- โ **CORS**: ุชู ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช CORS ููุฃูุงู ูุงููุฑููุฉ
- โ **ุงูุฃุตูู ุงููุณููุญุฉ**: ุชู ุชุญุฏูุฏ ุงูุฃุตูู ุงููุณููุญุฉ ุจุฏูุฉ
- โ **ุงูุทุฑู ุงููุณููุญุฉ**: ุชู ุชุญุฏูุฏ ุงูุทุฑู ูุงูุฑุคูุณ ุงููุณููุญุฉ

### 5. ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- โ **.env.production**: ุชู ุชุญุฏูุซู ุจุฅุนุฏุงุฏุงุช ุฃูุงู ุฅุถุงููุฉ
- โ **ุงูุฃูุงู**: ุชู ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุงูููููุฒ ุงูุขููุฉ
- โ **ุชุญุฏูุฏ ุงููุนุฏู**: ุชู ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ

### ุงูุชูููู ุงูุชููุงุฆู ููุจูุฆุฉ
```javascript
IS_PRODUCTION: window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1'
```

### ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- **ุนุฏุฏ ุงููุญุงููุงุช**: 3 ูุญุงููุงุช ูุญุฏ ุฃูุตู
- **ุชุฃุฎูุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: 1 ุซุงููุฉ ูุน ุฒูุงุฏุฉ ุชุฏุฑูุฌูุฉ
- **ูููุฉ ุงูุทูุจ**: 30 ุซุงููุฉ

### ุฅุนุฏุงุฏุงุช CORS ุงููุญุณูุฉ
- **ุงูุฃุตูู ุงููุณููุญุฉ**: ุชู ุชุญุฏูุฏูุง ุจุฏูุฉ ุญุณุจ ุงูุจูุฆุฉ
- **ุงูุทุฑู ุงููุณููุญุฉ**: GET, POST, PUT, DELETE, OPTIONS
- **ุงูุฑุคูุณ ุงููุณููุญุฉ**: Content-Type, Authorization, Accept

## ๐ ูุงุฆูุฉ ูุฑุงุฌุนุฉ ุงููุดุฑ

### ูุจู ุงููุดุฑ
- [ ] ุชุญุฏูุซ `MONGODB_URI` ูู `.env.production`
- [ ] ุชุญุฏูุซ `JWT_SECRET` (32 ุญุฑู ุนูู ุงูุฃูู)
- [ ] ุชุญุฏูุซ `SESSION_SECRET` (32 ุญุฑู ุนูู ุงูุฃูู)
- [ ] ุชุญุฏูุซ `ENCRYPTION_KEY` (32 ุญุฑู ุจุงูุถุจุท)
- [ ] ุชุญุฏูุซ ุจูุงูุงุช ุงุนุชูุงุฏ Facebook
- [ ] ุชุญุฏูุซ `OPENAI_API_KEY`

### ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
- [ ] ุงูุชุฃูุฏ ูู `SECURE_COOKIES=true`
- [ ] ุงูุชุฃูุฏ ูู `TRUST_PROXY=true`
- [ ] ูุฑุงุฌุนุฉ ุฅุนุฏุงุฏุงุช ุชุญุฏูุฏ ุงููุนุฏู
- [ ] ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS

### ุงุฎุชุจุงุฑ ูุง ุจุนุฏ ุงููุดุฑ
- [ ] ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู
- [ ] ุงุฎุชุจุงุฑ ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
- [ ] ุงุฎุชุจุงุฑ ุงูุชูุฌูู ุจูู ุงูุตูุญุงุช
- [ ] ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- [ ] ุงุฎุชุจุงุฑ ุงูุฃูุงู ูุงูุฃุฏุงุก

## ๐ ุฎุทูุงุช ุงููุดุฑ

### 1. ุฑูุน ุงููููุงุช
```bash
# ุฑูุน ุฌููุน ุงููููุงุช ุงููุญุฏุซุฉ
git add .
git commit -m "Update login system for web deployment"
git push origin main
```

### 2. ุชูููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ูู ููุญุฉ ุชุญูู ููุตุฉ ุงููุดุฑุ ูู ุจุชุนููู:
- `NODE_ENV=production`
- `MONGODB_URI=your-mongodb-connection-string`
- `JWT_SECRET=your-jwt-secret`
- ูุจุงูู ุงููุชุบูุฑุงุช ูู `.env.production`

### 3. ุงูุชุญูู ูู ุงููุดุฑ
- ุชุญูู ูู ุชุดุบูู ุงูุฎุงุฏู ุจูุฌุงุญ
- ุงุฎุชุจุฑ ุชุณุฌูู ุงูุฏุฎูู ูู ุงููุชุตูุญ
- ุฑุงูุจ ุงูุณุฌูุงุช ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### ุฎุทุฃ CORS
```
Access to fetch at 'https://...' from origin 'https://...' has been blocked by CORS policy
```
**ุงูุญู**: ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS ูู `server.mjs`

#### ุฎุทุฃ ุณูุงุณุฉ ุฃูุงู ุงููุญุชูู (CSP)
```
Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' https://cdnjs.cloudflare.com"
```
**ุงูุญู**: ุฑุงุฌุน ูุณู "ุฅุนุฏุงุฏุงุช ุณูุงุณุฉ ุฃูุงู ุงููุญุชูู (CSP)" ุฃุฏูุงู

## ๐ก๏ธ ุฅุนุฏุงุฏุงุช ุณูุงุณุฉ ุฃูุงู ุงููุญุชูู (CSP)

### ููู ุณูุงุณุฉ ุฃูุงู ุงููุญุชูู
ุณูุงุณุฉ ุฃูุงู ุงููุญุชูู (CSP) ูู ุทุจูุฉ ุฃูุงู ุฅุถุงููุฉ ุชุณุงุนุฏ ูู ุงูุชุดุงู ูููุน ูุฌูุงุช ุญูู ุงููุญุชูู ูุซู Cross-Site Scripting (XSS). ุชุนูู CSP ุนู ุทุฑูู ุชุญุฏูุฏ ูุตุงุฏุฑ ุงููุญุชูู ุงููุณููุญ ุจูุง.

### ุงูุชูููู ุงูุญุงูู ูู `server.mjs`
```javascript
app.use(
  helmet({
    contentSecurityPolicy: {
      directives: {
        defaultSrc: ["'self'"],
        scriptSrc: ["'self'", "https://cdnjs.cloudflare.com"],
        styleSrc: ["'self'", "'unsafe-inline'", "https://cdnjs.cloudflare.com"],
        imgSrc: ["'self'", "data:", "https:"],
        connectSrc: ["'self'", "https://api.render.com"],
        fontSrc: ["'self'", "https://cdnjs.cloudflare.com"],
        objectSrc: ["'none'"],
        upgradeInsecureRequests: [],
      },
    },
  })
);
```

### ุฃูุถู ุงูููุงุฑุณุงุช ููุชุนุงูู ูุน ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ (Inline Scripts)

#### ุงููุดููุฉ ุงูุดุงุฆุนุฉ
ุชููุน CSP ุชูููุฐ ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ (inline scripts) ุงูุชุฑุงุถููุงุ ููุง ูุฏ ูุคุฏู ุฅูู ุฃุฎุทุงุก ูุซู:
```
Refused to execute inline script because it violates CSP directive
```

#### ุงูุญููู ุงูููุตู ุจูุง (ูู ุงูุฃูุซุฑ ุฃูุงููุง ุฅูู ุงูุฃูู ุฃูุงููุง)

1. **ููู ุฌููุน ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ** โ
   - ุงููู ูู ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ุฅูู ูููุงุช `.js` ุฎุงุฑุฌูุฉ
   - ุงุณุชุจุฏู ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ุงููุถููุฉ (ูุซู `onclick="..."`) ุจูุณุชูุนู ุฃุญุฏุงุซ ูู ูููุงุช JS
   ```javascript
   // ุจุฏูุงู ูู: <select onchange="changeLanguage()">
   // ูู ููู JS ุฎุงุฑุฌู:
   document.querySelector('select').addEventListener('change', changeLanguage);
   ```

2. **ุงุณุชุฎุฏุงู ูุธุงู nonce ูููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ุงูุฏููุงููููุฉ** โ๏ธ
   - ุฅูุดุงุก nonce ูุฑูุฏ ููู ุทูุจ ูุฅุถุงูุชู ุฅูู CSP
   - ุฅุถุงูุฉ ููุณ nonce ุฅูู ูุณู script
   ```javascript
   // ูู server.mjs
   app.use((req, res, next) => {
     const nonce = crypto.randomBytes(16).toString('base64');
     res.locals.nonce = nonce;
     // ุชุญุฏูุซ CSP ููุดูู nonce
     next();
   });
   
   // ูู ุงููุงูุจ HTML
   <script nonce="<%= nonce %>">...</script>
   ```

3. **ุงุณุชุฎุฏุงู ูุธุงู hash ูููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ุงูุซุงุจุชุฉ** โ๏ธ
   - ุญุณุงุจ hash SHA-256 ูููุต ุงูุจุฑูุฌู ุงูุฏุงุฎูู
   - ุฅุถุงูุฉ hash ุฅูู ุชูุฌูู script-src ูู CSP
   ```javascript
   // ูู CSP
   scriptSrc: ["'self'", "https://cdnjs.cloudflare.com", "'sha256-hashValue'"]
   ```

### ูุงุฆูุฉ ูุฑุงุฌุนุฉ CSP ูููุดุฑ

- [ ] ุชุฏููู ุฌููุน ูููุงุช HTML ููุจุญุซ ุนู ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ููุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ุงููุถููุฉ
- [ ] ููู ุฌููุน ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ ุฅูู ูููุงุช JS ุฎุงุฑุฌูุฉ
- [ ] ุงุณุชุจุฏุงู ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ุงููุถููุฉ (ูุซู `onclick`) ุจูุณุชูุนู ุฃุญุฏุงุซ ูู ูููุงุช JS
- [ ] ุงูุชุญูู ูู ุฃู CSP ูุง ุชุญุชูู ุนูู `'unsafe-inline'` ูู ุชูุฌูู `script-src`
- [ ] ุงุฎุชุจุงุฑ ุงููููุน ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก CSP ูู ูุญุฏุฉ ุชุญูู ุงููุชุตูุญ
- [ ] ุงูุชุญูู ูู ุฑุคูุณ CSP ูู ุงุณุชุฌุงุจุงุช ุงูุฎุงุฏู ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงููุทูุฑ

### ุงูุชุญูู ูู CSP ุจุนุฏ ุงููุดุฑ

1. ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ ูู ุงููุชุตูุญ (F12)
2. ุงูุชูู ุฅูู ุนูุงูุฉ ุงูุชุจููุจ Network
3. ุญุฏุฏ ุฃู ุทูุจ HTML ูุชุญูู ูู ุฑุคูุณ ุงูุงุณุชุฌุงุจุฉ
4. ุชุฃูุฏ ูู ูุฌูุฏ ุฑุฃุณ `Content-Security-Policy` ุจุงูุฅุนุฏุงุฏุงุช ุงูุตุญูุญุฉ
5. ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก CSP ูู ูุญุฏุฉ ุงูุชุญูู

#### ุฎุทุฃ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```
MongooseError: Operation `users.findOne()` buffering timed out
```
**ุงูุญู**: ุชุญูู ูู `MONGODB_URI` ูุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ

#### ุฎุทุฃ JWT
```
JsonWebTokenError: invalid token
```
**ุงูุญู**: ุชุญูู ูู `JWT_SECRET` ูุตุญุฉ ุงูุฑูุฒ ุงููููุฒ

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ูุคุดุฑุงุช ูููุฉ ูููุฑุงูุจุฉ
- ุฒูู ุงูุงุณุชุฌุงุจุฉ ููุทูุจุงุช
- ูุนุฏู ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู
- ุฃุฎุทุงุก ุงูุดุจูุฉ ูุงูุฎุงุฏู
- ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ูุงููุนุงูุฌ

### ุฃุฏูุงุช ุงููุฑุงูุจุฉ ุงูููุตู ุจูุง
- ูุฑุงูุจุฉ ุงูุณุฌูุงุช ูู ุงูููุช ุงููุนูู
- ุชูุจููุงุช ุงูุฃุฎุทุงุก
- ูุฑุงูุจุฉ ููุช ุงูุชุดุบูู
- ุชุญููู ุงูุฃุฏุงุก

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช ุงูุฃูููุฉ

### ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- ุงุณุชุฎุฏุงู HTTPS ููุท ูู ุงูุฅูุชุงุฌ
- ุชุดููุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ
- ุชุฃููู ุงูููููุฒ ุจู `Secure` ู `HttpOnly`
- ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช ูููุน ุงููุฌูุงุช

### ูุฑุงุฌุนุฉ ุฏูุฑูุฉ
- ูุฑุงุฌุนุฉ ุงูุณุฌูุงุช ุจุงูุชุธุงู
- ุชุญุฏูุซ ุงูููุชุจุงุช ูุงูุชุจุนูุงุช
- ุงุฎุชุจุงุฑ ุงูุฃูุงู ุฏูุฑูุงู
- ูุณุฎ ุงุญุชูุงุทูุฉ ููุชุธูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

---

**ููุงุญุธุฉ**: ูุฐุง ุงูุฏููู ูุบุทู ุงูุชุญุฏูุซุงุช ุงูุฃุณุงุณูุฉ ููุธุงู ุชุณุฌูู ุงูุฏุฎูู. ุชุฃูุฏ ูู ุงุฎุชุจุงุฑ ุฌููุน ุงููุธุงุฆู ูุจู ุงููุดุฑ ุงูููุงุฆู.